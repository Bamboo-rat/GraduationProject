# Test Configuration - Use H2 in-memory database for testing

# ===== H2 IN-MEMORY DATABASE =====
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA Configuration for H2
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.h2.console.enabled=false

# ===============================
# KEYCLOAK CONFIGURATION (Mock values for testing)
# ===============================
keycloak.auth-server-url=http://localhost:8081
keycloak.realm=savefood
keycloak.resource=backend-fs
keycloak.customer.client-secret=test-secret

keycloak.admin.username=admin
keycloak.admin.password=admin
keycloak.admin.client-id=admin-cli

# DISABLE JWT validation in tests (không cần Keycloak server)
spring.security.oauth2.resourceserver.jwt.issuer-uri=https://savefood-keycloak.onrender.com
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration

# ===============================
# SENDGRID CONFIGURATION (Mock)
# ===============================
sendgrid.api-key=test-key
sendgrid.from-email=test@example.com
sendgrid.from-name=Test

# ===============================
# APPLICATION CONFIGURATION
# ===============================
app.frontend-url=http://localhost:3000
app.cors.allowed-origins=http://localhost:3000,http://localhost:3001

# ===============================
# JWT CONFIGURATION (for custom tokens)
# ===============================
jwt.secret=test-secret-key-for-jwt-token-generation-minimum-32-characters-long
jwt.access-token-expiration=720000000
jwt.refresh-token-expiration=604800000

# ===============================
# CLOUDINARY CONFIGURATION (Mock for testing)
# ===============================
cloudinary.cloud-name=test-cloud
cloudinary.api-key=test-api-key
cloudinary.api-secret=test-api-secret
